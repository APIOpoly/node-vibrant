!function t(n,r,e){function i(u,a){if(!r[u]){if(!n[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=r[u]={exports:{}};n[u][0].call(f.exports,function(t){var r=n[u][1][t];return i(r?r:t)},f,f.exports,t,n,r,e)}return r[u].exports}for(var o="function"==typeof require&&require,u=0;u<e.length;u++)i(e[u]);return i}({1:[function(t,n,r){var e,i,o=function(t,n){function r(){this.constructor=t}for(var e in n)u.call(n,e)&&(t[e]=n[e]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},u={}.hasOwnProperty;i=t("./image"),n.exports=e=function(t){function n(t,n){this.img=document.createElement("img"),this.img.src=t,this.img.onload=function(t){return function(){return t._initCanvas(),"function"==typeof n?n(null,t):void 0}}(this),this.img.onerror=function(r){return function(r){var e;return e=new Error("Fail to load image: "+t),e.raw=r,"function"==typeof n?n(e):void 0}}(this)}return o(n,t),n.prototype._initCanvas=function(){return this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=this.img.width,this.height=this.canvas.height=this.img.height,this.context.drawImage(this.img,0,0,this.width,this.height),console.log(this.width,this.height)},n.prototype.clear=function(){return this.context.clearRect(0,0,this.width,this.height)},n.prototype.update=function(t){return this.context.putImageData(t,0,0)},n.prototype.getPixelCount=function(){return this.width*this.height},n.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},n.prototype.removeCanvas=function(){return this.canvas.parentNode.removeChild(this.canvas)},n}(i)},{"./image":4}],2:[function(t,n,r){var e;e=t("./vibrant"),e.Image=t("./browser-image"),n.exports=e},{"./browser-image":1,"./vibrant":7}],3:[function(t,n,r){var e;window.Vibrant=e=t("../")},{"../":2}],4:[function(t,n,r){var e;n.exports=e=function(){function t(){}return t.prototype.clear=function(){},t.prototype.update=function(t){},t.prototype.getPixelCount=function(){},t.prototype.getImageData=function(){},t.prototype.removeCanvas=function(){},t}()},{}],5:[function(t,n,r){var e,i;i=t("./util"),n.exports=e=function(){function t(t,n){this.rgb=t,this.population=n}return t.prototype.hsl=void 0,t.prototype.rgb=void 0,t.prototype.population=1,t.yiq=0,t.prototype.getHsl=function(){return this.hsl?this.hsl:this.hsl=i.rgbToHsl(this.rgb[0],this.rgb[1],this.rgb[2])},t.prototype.getPopulation=function(){return this.population},t.prototype.getRgb=function(){return this.rgb},t.prototype.getHex=function(){return"#"+((1<<24)+(this.rgb[0]<<16)+(this.rgb[1]<<8)+this.rgb[2]).toString(16).slice(1,7)},t.prototype.getTitleTextColor=function(){return this._ensureTextColors(),this.yiq<200?"#fff":"#000"},t.prototype.getBodyTextColor=function(){return this._ensureTextColors(),this.yiq<150?"#fff":"#000"},t.prototype._ensureTextColors=function(){return this.yiq?void 0:this.yiq=(299*this.rgb[0]+587*this.rgb[1]+114*this.rgb[2])/1e3},t}()},{"./util":6}],6:[function(t,n,r){n.exports={rgbToHsl:function(t,n,r){var e,i,o,u,a,c;if(t/=255,n/=255,r/=255,u=Math.max(t,n,r),a=Math.min(t,n,r),i=void 0,c=void 0,o=(u+a)/2,u===a)i=c=0;else{switch(e=u-a,c=o>.5?e/(2-u-a):e/(u+a),u){case t:i=(n-r)/e+(r>n?6:0);break;case n:i=(r-t)/e+2;break;case r:i=(t-n)/e+4}i/=6}return[i,c,o]},hslToRgb:function(t,n,r){var e,i,o,u,a,c;return c=void 0,i=void 0,e=void 0,o=function(t,n,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(n-t)*r:.5>r?n:2/3>r?t+(n-t)*(2/3-r)*6:t},0===n?c=i=e=r:(a=.5>r?r*(1+n):r+n-r*n,u=2*r-a,c=o(u,a,t+1/3),i=o(u,a,t),e=o(u,a,t-1/3)),[255*c,255*i,255*e]}}},{}],7:[function(t,n,r){var e,i,o,u,a=function(t,n){return function(){return t.apply(n,arguments)}},c=[].slice;e=t("./swatch"),o=t("underscore"),u=t("./util"),n.exports=i=function(){function n(t,n){this.sourceImage=t,null==n&&(n={}),this.swatches=a(this.swatches,this),this.opts=o.defaults(n,{colorCount:64,quality:5})}return n.prototype.quantize=t("quantize"),n.prototype._swatches=[],n.prototype.TARGET_DARK_LUMA=.26,n.prototype.MAX_DARK_LUMA=.45,n.prototype.MIN_LIGHT_LUMA=.55,n.prototype.TARGET_LIGHT_LUMA=.74,n.prototype.MIN_NORMAL_LUMA=.3,n.prototype.TARGET_NORMAL_LUMA=.5,n.prototype.MAX_NORMAL_LUMA=.7,n.prototype.TARGET_MUTED_SATURATION=.3,n.prototype.MAX_MUTED_SATURATION=.4,n.prototype.TARGET_VIBRANT_SATURATION=1,n.prototype.MIN_VIBRANT_SATURATION=.35,n.prototype.WEIGHT_SATURATION=3,n.prototype.WEIGHT_LUMA=6,n.prototype.WEIGHT_POPULATION=1,n.prototype.VibrantSwatch=void 0,n.prototype.MutedSwatch=void 0,n.prototype.DarkVibrantSwatch=void 0,n.prototype.DarkMutedSwatch=void 0,n.prototype.LightVibrantSwatch=void 0,n.prototype.LightMutedSwatch=void 0,n.prototype.HighestPopulation=0,n.prototype.getSwatches=function(t){var n;return n=new this.constructor.Image(this.sourceImage,function(n){return function(r,e){var i;if(null!=r)return t(r);try{return n._process(e,n.opts),t(null,n.swatches())}catch(o){return i=o,t(i)}}}(this))},n.prototype._process=function(t,n){var r,i,o,u,a,c,s,f,l,h,p;for(s=t.getImageData(),h=s.data,l=t.getPixelCount(),i=[],c=0;l>c;)f=4*c,p=h[f+0],a=h[f+1],o=h[f+2],r=h[f+3],r>=125&&(p>250&&a>250&&o>250||i.push([p,a,o])),c+=n.quality;return u=this.quantize(i,n.colorCount),this._swatches=u.vboxes.map(function(t){return function(t){return new e(t.color,t.vbox.count())}}(this)),this.maxPopulation=this.findMaxPopulation,this.generateVarationColors(),this.generateEmptySwatches(),t.removeCanvas()},n.prototype.generateVarationColors=function(){return this.VibrantSwatch=this.findColorVariation(this.TARGET_NORMAL_LUMA,this.MIN_NORMAL_LUMA,this.MAX_NORMAL_LUMA,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1),this.LightVibrantSwatch=this.findColorVariation(this.TARGET_LIGHT_LUMA,this.MIN_LIGHT_LUMA,1,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1),this.DarkVibrantSwatch=this.findColorVariation(this.TARGET_DARK_LUMA,0,this.MAX_DARK_LUMA,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1),this.MutedSwatch=this.findColorVariation(this.TARGET_NORMAL_LUMA,this.MIN_NORMAL_LUMA,this.MAX_NORMAL_LUMA,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION),this.LightMutedSwatch=this.findColorVariation(this.TARGET_LIGHT_LUMA,this.MIN_LIGHT_LUMA,1,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION),this.DarkMutedSwatch=this.findColorVariation(this.TARGET_DARK_LUMA,0,this.MAX_DARK_LUMA,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION)},n.prototype.generateEmptySwatches=function(){var t;return void 0===this.VibrantSwatch&&void 0!==this.DarkVibrantSwatch&&(t=this.DarkVibrantSwatch.getHsl(),t[2]=this.TARGET_NORMAL_LUMA,this.VibrantSwatch=new e(u.hslToRgb(t[0],t[1],t[2]),0)),void 0===this.DarkVibrantSwatch&&void 0!==this.VibrantSwatch?(t=this.VibrantSwatch.getHsl(),t[2]=this.TARGET_DARK_LUMA,this.DarkVibrantSwatch=new e(u.hslToRgb(t[0],t[1],t[2]),0)):void 0},n.prototype.findMaxPopulation=function(){var t,n,r,e,i;for(r=0,e=this._swatches,t=0,n=e.length;n>t;t++)i=e[t],r=Math.max(r,i.getPopulation());return r},n.prototype.findColorVariation=function(t,n,r,e,i,o){var u,a,c,s,f,l,h,p,v;for(s=void 0,f=0,l=this._swatches,u=0,a=l.length;a>u;u++)p=l[u],h=p.getHsl()[1],c=p.getHsl()[2],h>=i&&o>=h&&c>=n&&r>=c&&!this.isAlreadySelected(p)&&(v=this.createComparisonValue(h,e,c,t,p.getPopulation(),this.HighestPopulation),(void 0===s||v>f)&&(s=p,f=v));return s},n.prototype.createComparisonValue=function(t,n,r,e,i,o){return this.weightedMean(this.invertDiff(t,n),this.WEIGHT_SATURATION,this.invertDiff(r,e),this.WEIGHT_LUMA,i/o,this.WEIGHT_POPULATION)},n.prototype.invertDiff=function(t,n){return 1-Math.abs(t-n)},n.prototype.weightedMean=function(){var t,n,r,e,i,o;for(i=1<=arguments.length?c.call(arguments,0):[],n=0,r=0,t=0;t<i.length;)e=i[t],o=i[t+1],n+=e*o,r+=o,t+=2;return n/r},n.prototype.swatches=function(){return{Vibrant:this.VibrantSwatch,Muted:this.MutedSwatch,DarkVibrant:this.DarkVibrantSwatch,DarkMuted:this.DarkMutedSwatch,LightVibrant:this.LightVibrantSwatch,LightMuted:this.LightMuted}},n.prototype.isAlreadySelected=function(t){return this.VibrantSwatch===t||this.DarkVibrantSwatch===t||this.LightVibrantSwatch===t||this.MutedSwatch===t||this.DarkMutedSwatch===t||this.LightMutedSwatch===t},n}()},{"./swatch":5,"./util":6,quantize:8,underscore:9}],8:[function(t,n,r){if(!e)var e={map:function(t,n){var r={};return n?t.map(function(t,e){return r.index=e,n.call(r,t)}):t.slice()},naturalOrder:function(t,n){return n>t?-1:t>n?1:0},sum:function(t,n){var r={};return t.reduce(n?function(t,e,i){return r.index=i,t+n.call(r,e)}:function(t,n){return t+n},0)},max:function(t,n){return Math.max.apply(null,n?e.map(t,n):t)}};var i=function(){function t(t,n,r){return(t<<2*s)+(n<<s)+r}function n(t){function n(){r.sort(t),e=!0}var r=[],e=!1;return{push:function(t){r.push(t),e=!1},peek:function(t){return e||n(),void 0===t&&(t=r.length-1),r[t]},pop:function(){return e||n(),r.pop()},size:function(){return r.length},map:function(t){return r.map(t)},debug:function(){return e||n(),r}}}function r(t,n,r,e,i,o,u){var a=this;a.r1=t,a.r2=n,a.g1=r,a.g2=e,a.b1=i,a.b2=o,a.histo=u}function i(){this.vboxes=new n(function(t,n){return e.naturalOrder(t.vbox.count()*t.vbox.volume(),n.vbox.count()*n.vbox.volume())})}function o(n){var r,e,i,o,u=1<<3*s,a=new Array(u);return n.forEach(function(n){e=n[0]>>f,i=n[1]>>f,o=n[2]>>f,r=t(e,i,o),a[r]=(a[r]||0)+1}),a}function u(t,n){var e,i,o,u=1e6,a=0,c=1e6,s=0,l=1e6,h=0;return t.forEach(function(t){e=t[0]>>f,i=t[1]>>f,o=t[2]>>f,u>e?u=e:e>a&&(a=e),c>i?c=i:i>s&&(s=i),l>o?l=o:o>h&&(h=o)}),new r(u,a,c,s,l,h,n)}function a(n,r){function i(t){var n,e,i,o,u,a=t+"1",c=t+"2",f=0;for(s=r[a];s<=r[c];s++)if(g[s]>v/2){for(i=r.copy(),o=r.copy(),n=s-r[a],e=r[c]-s,u=e>=n?Math.min(r[c]-1,~~(s+e/2)):Math.max(r[a],~~(s-1-n/2));!g[u];)u++;for(f=y[u];!f&&g[u-1];)f=y[--u];return i[c]=u,o[a]=i[c]+1,[i,o]}}if(r.count()){var o=r.r2-r.r1+1,u=r.g2-r.g1+1,a=r.b2-r.b1+1,c=e.max([o,u,a]);if(1==r.count())return[r.copy()];var s,f,l,h,p,v=0,g=[],y=[];if(c==o)for(s=r.r1;s<=r.r2;s++){for(h=0,f=r.g1;f<=r.g2;f++)for(l=r.b1;l<=r.b2;l++)p=t(s,f,l),h+=n[p]||0;v+=h,g[s]=v}else if(c==u)for(s=r.g1;s<=r.g2;s++){for(h=0,f=r.r1;f<=r.r2;f++)for(l=r.b1;l<=r.b2;l++)p=t(f,s,l),h+=n[p]||0;v+=h,g[s]=v}else for(s=r.b1;s<=r.b2;s++){for(h=0,f=r.r1;f<=r.r2;f++)for(l=r.g1;l<=r.g2;l++)p=t(f,l,s),h+=n[p]||0;v+=h,g[s]=v}return g.forEach(function(t,n){y[n]=v-t}),i(c==o?"r":c==u?"g":"b")}}function c(t,r){function c(t,n){for(var r,e=1,i=0;l>i;)if(r=t.pop(),r.count()){var o=a(s,r),u=o[0],c=o[1];if(!u)return;if(t.push(u),c&&(t.push(c),e++),e>=n)return;if(i++>l)return}else t.push(r),i++}if(!t.length||2>r||r>256)return!1;var s=o(t),f=0;s.forEach(function(){f++});var p=u(t,s),v=new n(function(t,n){return e.naturalOrder(t.count(),n.count())});v.push(p),c(v,h*r);for(var g=new n(function(t,n){return e.naturalOrder(t.count()*t.volume(),n.count()*n.volume())});v.size();)g.push(v.pop());c(g,r-g.size());for(var y=new i;g.size();)y.push(g.pop());return y}var s=5,f=8-s,l=1e3,h=.75;return r.prototype={volume:function(t){var n=this;return(!n._volume||t)&&(n._volume=(n.r2-n.r1+1)*(n.g2-n.g1+1)*(n.b2-n.b1+1)),n._volume},count:function(n){var r=this,e=r.histo;if(!r._count_set||n){var i,o,u,a=0;for(i=r.r1;i<=r.r2;i++)for(o=r.g1;o<=r.g2;o++)for(u=r.b1;u<=r.b2;u++)index=t(i,o,u),a+=e[index]||0;r._count=a,r._count_set=!0}return r._count},copy:function(){var t=this;return new r(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(n){var r=this,e=r.histo;if(!r._avg||n){var i,o,u,a,c,f=0,l=1<<8-s,h=0,p=0,v=0;for(o=r.r1;o<=r.r2;o++)for(u=r.g1;u<=r.g2;u++)for(a=r.b1;a<=r.b2;a++)c=t(o,u,a),i=e[c]||0,f+=i,h+=i*(o+.5)*l,p+=i*(u+.5)*l,v+=i*(a+.5)*l;r._avg=f?[~~(h/f),~~(p/f),~~(v/f)]:[~~(l*(r.r1+r.r2+1)/2),~~(l*(r.g1+r.g2+1)/2),~~(l*(r.b1+r.b2+1)/2)]}return r._avg},contains:function(t){var n=this,r=t[0]>>f;return gval=t[1]>>f,bval=t[2]>>f,r>=n.r1&&r<=n.r2&&gval>=n.g1&&gval<=n.g2&&bval>=n.b1&&bval<=n.b2}},i.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var n=this.vboxes,r=0;r<n.size();r++)if(n.peek(r).vbox.contains(t))return n.peek(r).color;return this.nearest(t)},nearest:function(t){for(var n,r,e,i=this.vboxes,o=0;o<i.size();o++)r=Math.sqrt(Math.pow(t[0]-i.peek(o).color[0],2)+Math.pow(t[1]-i.peek(o).color[1],2)+Math.pow(t[2]-i.peek(o).color[2],2)),(n>r||void 0===n)&&(n=r,e=i.peek(o).color);return e},forcebw:function(){var t=this.vboxes;t.sort(function(t,n){return e.naturalOrder(e.sum(t.color),e.sum(n.color))});var n=t[0].color;n[0]<5&&n[1]<5&&n[2]<5&&(t[0].color=[0,0,0]);var r=t.length-1,i=t[r].color;i[0]>251&&i[1]>251&&i[2]>251&&(t[r].color=[255,255,255])}},{quantize:c}}();n.exports=i.quantize},{}],9:[function(t,n,r){(function(){function t(t){function n(n,r,e,i,o,u){for(;o>=0&&u>o;o+=t){var a=i?i[o]:o;e=r(e,n[a],a,n)}return e}return function(r,e,i,o){e=b(e,o,4);var u=!S(r)&&A.keys(r),a=(u||r).length,c=t>0?0:a-1;return arguments.length<3&&(i=r[u?u[c]:c],c+=t),n(r,e,i,u,c,a)}}function e(t){return function(n,r,e){r=T(r,e);for(var i=I(n),o=t>0?0:i-1;o>=0&&i>o;o+=t)if(r(n[o],o,n))return o;return-1}}function i(t,n,r){return function(e,i,o){var u=0,a=I(e);if("number"==typeof o)t>0?u=o>=0?o:Math.max(o+a,u):a=o>=0?Math.min(o+1,a):o+a+1;else if(r&&o&&a)return o=r(e,i),e[o]===i?o:-1;if(i!==i)return o=n(h.call(e,u,a),A.isNaN),o>=0?o+u:-1;for(o=t>0?u:a-1;o>=0&&a>o;o+=t)if(e[o]===i)return o;return-1}}function o(t,n){var r=U.length,e=t.constructor,i=A.isFunction(e)&&e.prototype||s,o="constructor";for(A.has(t,o)&&!A.contains(n,o)&&n.push(o);r--;)o=U[r],o in t&&t[o]!==i[o]&&!A.contains(n,o)&&n.push(o)}var u=this,a=u._,c=Array.prototype,s=Object.prototype,f=Function.prototype,l=c.push,h=c.slice,p=s.toString,v=s.hasOwnProperty,g=Array.isArray,y=Object.keys,d=f.bind,m=Object.create,_=function(){},A=function(t){return t instanceof A?t:this instanceof A?void(this._wrapped=t):new A(t)};"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=A),r._=A):u._=A,A.VERSION="1.8.3";var b=function(t,n,r){if(void 0===n)return t;switch(null==r?3:r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)};case 4:return function(r,e,i,o){return t.call(n,r,e,i,o)}}return function(){return t.apply(n,arguments)}},T=function(t,n,r){return null==t?A.identity:A.isFunction(t)?b(t,n,r):A.isObject(t)?A.matcher(t):A.property(t)};A.iteratee=function(t,n){return T(t,n,1/0)};var w=function(t,n){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var i=1;e>i;i++)for(var o=arguments[i],u=t(o),a=u.length,c=0;a>c;c++){var s=u[c];n&&void 0!==r[s]||(r[s]=o[s])}return r}},M=function(t){if(!A.isObject(t))return{};if(m)return m(t);_.prototype=t;var n=new _;return _.prototype=null,n},x=function(t){return function(n){return null==n?void 0:n[t]}},R=Math.pow(2,53)-1,I=x("length"),S=function(t){var n=I(t);return"number"==typeof n&&n>=0&&R>=n};A.each=A.forEach=function(t,n,r){n=b(n,r);var e,i;if(S(t))for(e=0,i=t.length;i>e;e++)n(t[e],e,t);else{var o=A.keys(t);for(e=0,i=o.length;i>e;e++)n(t[o[e]],o[e],t)}return t},A.map=A.collect=function(t,n,r){n=T(n,r);for(var e=!S(t)&&A.keys(t),i=(e||t).length,o=Array(i),u=0;i>u;u++){var a=e?e[u]:u;o[u]=n(t[a],a,t)}return o},A.reduce=A.foldl=A.inject=t(1),A.reduceRight=A.foldr=t(-1),A.find=A.detect=function(t,n,r){var e;return e=S(t)?A.findIndex(t,n,r):A.findKey(t,n,r),void 0!==e&&-1!==e?t[e]:void 0},A.filter=A.select=function(t,n,r){var e=[];return n=T(n,r),A.each(t,function(t,r,i){n(t,r,i)&&e.push(t)}),e},A.reject=function(t,n,r){return A.filter(t,A.negate(T(n)),r)},A.every=A.all=function(t,n,r){n=T(n,r);for(var e=!S(t)&&A.keys(t),i=(e||t).length,o=0;i>o;o++){var u=e?e[o]:o;if(!n(t[u],u,t))return!1}return!0},A.some=A.any=function(t,n,r){n=T(n,r);for(var e=!S(t)&&A.keys(t),i=(e||t).length,o=0;i>o;o++){var u=e?e[o]:o;if(n(t[u],u,t))return!0}return!1},A.contains=A.includes=A.include=function(t,n,r,e){return S(t)||(t=A.values(t)),("number"!=typeof r||e)&&(r=0),A.indexOf(t,n,r)>=0},A.invoke=function(t,n){var r=h.call(arguments,2),e=A.isFunction(n);return A.map(t,function(t){var i=e?n:t[n];return null==i?i:i.apply(t,r)})},A.pluck=function(t,n){return A.map(t,A.property(n))},A.where=function(t,n){return A.filter(t,A.matcher(n))},A.findWhere=function(t,n){return A.find(t,A.matcher(n))},A.max=function(t,n,r){var e,i,o=-(1/0),u=-(1/0);if(null==n&&null!=t){t=S(t)?t:A.values(t);for(var a=0,c=t.length;c>a;a++)e=t[a],e>o&&(o=e)}else n=T(n,r),A.each(t,function(t,r,e){i=n(t,r,e),(i>u||i===-(1/0)&&o===-(1/0))&&(o=t,u=i)});return o},A.min=function(t,n,r){var e,i,o=1/0,u=1/0;if(null==n&&null!=t){t=S(t)?t:A.values(t);for(var a=0,c=t.length;c>a;a++)e=t[a],o>e&&(o=e)}else n=T(n,r),A.each(t,function(t,r,e){i=n(t,r,e),(u>i||i===1/0&&o===1/0)&&(o=t,u=i)});return o},A.shuffle=function(t){for(var n,r=S(t)?t:A.values(t),e=r.length,i=Array(e),o=0;e>o;o++)n=A.random(0,o),n!==o&&(i[o]=i[n]),i[n]=r[o];return i},A.sample=function(t,n,r){return null==n||r?(S(t)||(t=A.values(t)),t[A.random(t.length-1)]):A.shuffle(t).slice(0,Math.max(0,n))},A.sortBy=function(t,n,r){return n=T(n,r),A.pluck(A.map(t,function(t,r,e){return{value:t,index:r,criteria:n(t,r,e)}}).sort(function(t,n){var r=t.criteria,e=n.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return t.index-n.index}),"value")};var O=function(t){return function(n,r,e){var i={};return r=T(r,e),A.each(n,function(e,o){var u=r(e,o,n);t(i,e,u)}),i}};A.groupBy=O(function(t,n,r){A.has(t,r)?t[r].push(n):t[r]=[n]}),A.indexBy=O(function(t,n,r){t[r]=n}),A.countBy=O(function(t,n,r){A.has(t,r)?t[r]++:t[r]=1}),A.toArray=function(t){return t?A.isArray(t)?h.call(t):S(t)?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:S(t)?t.length:A.keys(t).length},A.partition=function(t,n,r){n=T(n,r);var e=[],i=[];return A.each(t,function(t,r,o){(n(t,r,o)?e:i).push(t)}),[e,i]},A.first=A.head=A.take=function(t,n,r){return null==t?void 0:null==n||r?t[0]:A.initial(t,t.length-n)},A.initial=function(t,n,r){return h.call(t,0,Math.max(0,t.length-(null==n||r?1:n)))},A.last=function(t,n,r){return null==t?void 0:null==n||r?t[t.length-1]:A.rest(t,Math.max(0,t.length-n))},A.rest=A.tail=A.drop=function(t,n,r){return h.call(t,null==n||r?1:n)},A.compact=function(t){return A.filter(t,A.identity)};var N=function(t,n,r,e){for(var i=[],o=0,u=e||0,a=I(t);a>u;u++){var c=t[u];if(S(c)&&(A.isArray(c)||A.isArguments(c))){n||(c=N(c,n,r));var s=0,f=c.length;for(i.length+=f;f>s;)i[o++]=c[s++]}else r||(i[o++]=c)}return i};A.flatten=function(t,n){return N(t,n,!1)},A.without=function(t){return A.difference(t,h.call(arguments,1))},A.uniq=A.unique=function(t,n,r,e){A.isBoolean(n)||(e=r,r=n,n=!1),null!=r&&(r=T(r,e));for(var i=[],o=[],u=0,a=I(t);a>u;u++){var c=t[u],s=r?r(c,u,t):c;n?(u&&o===s||i.push(c),o=s):r?A.contains(o,s)||(o.push(s),i.push(c)):A.contains(i,c)||i.push(c)}return i},A.union=function(){return A.uniq(N(arguments,!0,!0))},A.intersection=function(t){for(var n=[],r=arguments.length,e=0,i=I(t);i>e;e++){var o=t[e];if(!A.contains(n,o)){for(var u=1;r>u&&A.contains(arguments[u],o);u++);u===r&&n.push(o)}}return n},A.difference=function(t){var n=N(arguments,!0,!0,1);return A.filter(t,function(t){return!A.contains(n,t)})},A.zip=function(){return A.unzip(arguments)},A.unzip=function(t){for(var n=t&&A.max(t,I).length||0,r=Array(n),e=0;n>e;e++)r[e]=A.pluck(t,e);return r},A.object=function(t,n){for(var r={},e=0,i=I(t);i>e;e++)n?r[t[e]]=n[e]:r[t[e][0]]=t[e][1];return r},A.findIndex=e(1),A.findLastIndex=e(-1),A.sortedIndex=function(t,n,r,e){r=T(r,e,1);for(var i=r(n),o=0,u=I(t);u>o;){var a=Math.floor((o+u)/2);r(t[a])<i?o=a+1:u=a}return o},A.indexOf=i(1,A.findIndex,A.sortedIndex),A.lastIndexOf=i(-1,A.findLastIndex),A.range=function(t,n,r){null==n&&(n=t||0,t=0),r=r||1;for(var e=Math.max(Math.ceil((n-t)/r),0),i=Array(e),o=0;e>o;o++,t+=r)i[o]=t;return i};var E=function(t,n,r,e,i){if(!(e instanceof n))return t.apply(r,i);var o=M(t.prototype),u=t.apply(o,i);return A.isObject(u)?u:o};A.bind=function(t,n){if(d&&t.bind===d)return d.apply(t,h.call(arguments,1));if(!A.isFunction(t))throw new TypeError("Bind must be called on a function");var r=h.call(arguments,2),e=function(){return E(t,e,n,this,r.concat(h.call(arguments)))};return e},A.partial=function(t){var n=h.call(arguments,1),r=function(){for(var e=0,i=n.length,o=Array(i),u=0;i>u;u++)o[u]=n[u]===A?arguments[e++]:n[u];for(;e<arguments.length;)o.push(arguments[e++]);return E(t,r,this,this,o)};return r},A.bindAll=function(t){var n,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(n=1;e>n;n++)r=arguments[n],t[r]=A.bind(t[r],t);return t},A.memoize=function(t,n){var r=function(e){var i=r.cache,o=""+(n?n.apply(this,arguments):e);return A.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return r.cache={},r},A.delay=function(t,n){var r=h.call(arguments,2);return setTimeout(function(){return t.apply(null,r)},n)},A.defer=A.partial(A.delay,A,1),A.throttle=function(t,n,r){var e,i,o,u=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:A.now(),u=null,o=t.apply(e,i),u||(e=i=null)};return function(){var s=A.now();a||r.leading!==!1||(a=s);var f=n-(s-a);return e=this,i=arguments,0>=f||f>n?(u&&(clearTimeout(u),u=null),a=s,o=t.apply(e,i),u||(e=i=null)):u||r.trailing===!1||(u=setTimeout(c,f)),o}},A.debounce=function(t,n,r){var e,i,o,u,a,c=function(){var s=A.now()-u;n>s&&s>=0?e=setTimeout(c,n-s):(e=null,r||(a=t.apply(o,i),e||(o=i=null)))};return function(){o=this,i=arguments,u=A.now();var s=r&&!e;return e||(e=setTimeout(c,n)),s&&(a=t.apply(o,i),o=i=null),a}},A.wrap=function(t,n){return A.partial(n,t)},A.negate=function(t){return function(){return!t.apply(this,arguments)}},A.compose=function(){var t=arguments,n=t.length-1;return function(){for(var r=n,e=t[n].apply(this,arguments);r--;)e=t[r].call(this,e);return e}},A.after=function(t,n){return function(){return--t<1?n.apply(this,arguments):void 0}},A.before=function(t,n){var r;return function(){return--t>0&&(r=n.apply(this,arguments)),1>=t&&(n=null),r}},A.once=A.partial(A.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),U=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];A.keys=function(t){if(!A.isObject(t))return[];if(y)return y(t);var n=[];for(var r in t)A.has(t,r)&&n.push(r);return L&&o(t,n),n},A.allKeys=function(t){if(!A.isObject(t))return[];var n=[];for(var r in t)n.push(r);return L&&o(t,n),n},A.values=function(t){for(var n=A.keys(t),r=n.length,e=Array(r),i=0;r>i;i++)e[i]=t[n[i]];return e},A.mapObject=function(t,n,r){n=T(n,r);for(var e,i=A.keys(t),o=i.length,u={},a=0;o>a;a++)e=i[a],u[e]=n(t[e],e,t);return u},A.pairs=function(t){for(var n=A.keys(t),r=n.length,e=Array(r),i=0;r>i;i++)e[i]=[n[i],t[n[i]]];return e},A.invert=function(t){for(var n={},r=A.keys(t),e=0,i=r.length;i>e;e++)n[t[r[e]]]=r[e];return n},A.functions=A.methods=function(t){var n=[];for(var r in t)A.isFunction(t[r])&&n.push(r);return n.sort()},A.extend=w(A.allKeys),A.extendOwn=A.assign=w(A.keys),A.findKey=function(t,n,r){n=T(n,r);for(var e,i=A.keys(t),o=0,u=i.length;u>o;o++)if(e=i[o],n(t[e],e,t))return e},A.pick=function(t,n,r){var e,i,o={},u=t;if(null==u)return o;A.isFunction(n)?(i=A.allKeys(u),e=b(n,r)):(i=N(arguments,!1,!1,1),e=function(t,n,r){return n in r},u=Object(u));for(var a=0,c=i.length;c>a;a++){var s=i[a],f=u[s];e(f,s,u)&&(o[s]=f)}return o},A.omit=function(t,n,r){if(A.isFunction(n))n=A.negate(n);else{var e=A.map(N(arguments,!1,!1,1),String);n=function(t,n){return!A.contains(e,n)}}return A.pick(t,n,r)},A.defaults=w(A.allKeys,!0),A.create=function(t,n){var r=M(t);return n&&A.extendOwn(r,n),r},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,n){return n(t),t},A.isMatch=function(t,n){var r=A.keys(n),e=r.length;if(null==t)return!e;for(var i=Object(t),o=0;e>o;o++){var u=r[o];if(n[u]!==i[u]||!(u in i))return!1}return!0};var k=function(t,n,r,e){if(t===n)return 0!==t||1/t===1/n;if(null==t||null==n)return t===n;t instanceof A&&(t=t._wrapped),n instanceof A&&(n=n._wrapped);var i=p.call(t);if(i!==p.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!==+t?+n!==+n:0===+t?1/+t===1/n:+t===+n;case"[object Date]":case"[object Boolean]":return+t===+n}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof n)return!1;var u=t.constructor,a=n.constructor;if(u!==a&&!(A.isFunction(u)&&u instanceof u&&A.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in n)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===t)return e[c]===n;if(r.push(t),e.push(n),o){if(c=t.length,c!==n.length)return!1;for(;c--;)if(!k(t[c],n[c],r,e))return!1}else{var s,f=A.keys(t);if(c=f.length,A.keys(n).length!==c)return!1;for(;c--;)if(s=f[c],!A.has(n,s)||!k(t[s],n[s],r,e))return!1}return r.pop(),e.pop(),!0};A.isEqual=function(t,n){return k(t,n)},A.isEmpty=function(t){return null==t?!0:S(t)&&(A.isArray(t)||A.isString(t)||A.isArguments(t))?0===t.length:0===A.keys(t).length},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=g||function(t){return"[object Array]"===p.call(t)},A.isObject=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t},A.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){A["is"+t]=function(n){return p.call(n)==="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return A.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(A.isFunction=function(t){return"function"==typeof t||!1}),A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!==+t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===p.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,n){return null!=t&&v.call(t,n)},A.noConflict=function(){return u._=a,this},A.identity=function(t){return t},A.constant=function(t){return function(){return t}},A.noop=function(){},A.property=x,A.propertyOf=function(t){return null==t?function(){}:function(n){return t[n]}},A.matcher=A.matches=function(t){return t=A.extendOwn({},t),function(n){return A.isMatch(n,t)}},A.times=function(t,n,r){var e=Array(Math.max(0,t));n=b(n,r,1);for(var i=0;t>i;i++)e[i]=n(i);return e},A.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},A.now=Date.now||function(){return(new Date).getTime()};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=A.invert(V),j=function(t){var n=function(n){return t[n]},r="(?:"+A.keys(t).join("|")+")",e=RegExp(r),i=RegExp(r,"g");return function(t){return t=null==t?"":""+t,e.test(t)?t.replace(i,n):t}};A.escape=j(V),A.unescape=j(D),A.result=function(t,n,r){var e=null==t?void 0:t[n];return void 0===e&&(e=r),A.isFunction(e)?e.call(t):e};var C=0;A.uniqueId=function(t){var n=++C+"";return t?t+n:n},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,z=function(t){return"\\"+q[t]};A.template=function(t,n,r){!n&&r&&(n=r),n=A.defaults({},n,A.templateSettings);var e=RegExp([(n.escape||G).source,(n.interpolate||G).source,(n.evaluate||G).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(e,function(n,r,e,u,a){return o+=t.slice(i,a).replace(H,z),i=a+n.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?o+="'+\n((__t=("+e+"))==null?'':__t)+\n'":u&&(o+="';\n"+u+"\n__p+='"),n}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var u=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}var c=function(t){return u.call(this,t,A)},s=n.variable||"obj";return c.source="function("+s+"){\n"+o+"}",c},A.chain=function(t){var n=A(t);return n._chain=!0,n};var F=function(t,n){return t._chain?A(n).chain():n};A.mixin=function(t){A.each(A.functions(t),function(n){var r=A[n]=t[n];A.prototype[n]=function(){var t=[this._wrapped];return l.apply(t,arguments),F(this,r.apply(A,t))}})},A.mixin(A),A.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=c[t];A.prototype[t]=function(){var r=this._wrapped;return n.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0],F(this,r)}}),A.each(["concat","join","slice"],function(t){var n=c[t];A.prototype[t]=function(){return F(this,n.apply(this._wrapped,arguments))}}),A.prototype.value=function(){return this._wrapped},A.prototype.valueOf=A.prototype.toJSON=A.prototype.value,A.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return A})}).call(this)},{}]},{},[3]);